<!doctype html>
<html lang="sv">
<meta charset="utf-8" />
<title>Databaser och SQL | Kursen databas</title>

<!-- Mithril HTML Slideshow styles -->
<link href="../css/mithril-slideshow.css" rel="stylesheet" />

<!-- Code formatting using highlight.js -->
<link rel="stylesheet" href="../css/default.css">
<link rel="stylesheet" href="../css/tomorrow.css">
<script src="../js/highlight.pack.js"></script>

<!-- Text formatting using Markdown through showdown.js -->
<script src="../js/showdown.min.js"></script>



<!-- Here comes the slides in order -->
<script data-role="slide" data-markdown type="text/html">
# Databas
## MySQL och SQL
### Mikael Roos, dbwebb
</script>



<script data-role="slide" data-markdown type="text/html">
# Agenda

* MySQL
* Databaser intro
* SQL

</script>



<script data-role="slide" data-markdown type="text/html">
# Om MySQL

</script>



<script data-role="slide" data-markdown type="text/html">
# MySQL

* Populär opensource databas, port 3306, release -95
* Utvecklare Michael Widenius, Davix Axmark
* Döpt efter Michels dotter My
* En del i [WLXM]AMP
* MySQL AB i Uppsala erbjud support/dokumentation
* 2008: såldes till Sun för 1 miljard dollar
* 2010: Sun köptes av Oracle

</script>



<script data-role="slide" data-markdown type="text/html">
# MariaDB

* "drop-in replacement for MySQL"
* MariaDB döpt efter Michels dotter Maria
* Kommersiell via Monty Programs AB (Monty är Michaels smeknamn)
* Gundare är ursprungliga MySQL-grundarna samt Allan Larsson.
* Vilken bör man använda?

</script>



<script data-role="slide" data-markdown type="text/html">
<img src="img/database-ranking-jan-2018.png" style="width: 100%">
[Källa](https://db-engines.com/en/ranking)
</script>




<script data-role="slide" data-markdown type="text/html">
# Referensmanualen

* Googla "mysql doc" eller "mysql doc select"
* Välj rätt version, kan finnas saker som skiljer mellan versioner
* Aktuell version 5.7

</script>



<script data-role="slide" data-markdown type="text/html">
# Termer om databaser
</script>



<script data-role="slide" data-markdown type="text/html">
# Databas

* Organiserad samling av data.

</script>



<script data-role="slide" data-markdown type="text/html">
# Database Management System

* Programvara för att interagera mellan användare/klient och databas.
* Förkortas DBMS

</script>



<script data-role="slide" data-markdown type="text/html">
# Relational database

* Relationsdatabas
* Lagrar data baserad på relationsmodellen (relational model)
* Relation = tabell

</script>



<script data-role="slide" data-markdown type="text/html">
# Relation database management system

* Programvara för att interagera med en relationsdatabas
* Förkortas RDBMS

</script>



<script data-role="slide" data-markdown type="text/html">
# Relationsdatabas bygger på mängdlära (set theory)
</script>



<script data-role="slide" data-markdown type="text/html">
# Två mängder

```python
a = [0, 2, 4, 6]
b = [1, 2, 3, 4, 5]
```

* Ritas ofta som ringar.

</script>



<script data-role="slide" data-markdown type="text/html">
# Snitt

* Vilka siffror finns i båda mängderna?

```python
a = [0, 2, 4, 6]
b = [1, 2, 3, 4, 5]
```

</script>



<script data-role="slide" data-markdown type="text/html">
# Snitt...

```python
snitt = [2, 4]
```

</script>



<script data-role="slide" data-markdown type="text/html">
# Union

* Vilka siffror finns om man slår samman de båda mängderna?

```python
a = [0, 2, 4, 6]
b = [1, 2, 3, 4, 5]
```

</script>



<script data-role="slide" data-markdown type="text/html">
# Union...

```python
union = [0, 1, 2, 3, 4, 5, 6]
```

</script>



<script data-role="slide" data-markdown type="text/html">
# Differens

* Alla element i A som inte finns i B

```python
a = [0, 2, 4, 6]
b = [1, 2, 3, 4, 5]
```

</script>



<script data-role="slide" data-markdown type="text/html">
# Differans A B...

```python
diffAB = [0, 6]
```

</script>



<!-- Slide -->
<script data-role="slide" data-markdown type="text/html">
# Differens

* Alla element i B som inte finns i A

```python
a = [0, 2, 4, 6]
b = [1, 2, 3, 4, 5]
```

</script>



<script data-role="slide" data-markdown type="text/html">
# Differans B A...

```python
diffBA = [1, 3, 5]
```

</script>



<script data-role="slide" data-markdown type="text/html">
# Låt oss lämna matematiken och återgå till databaserna

</script>



<script data-role="slide" data-markdown type="text/html">
# Relational algebra

* "Räkna" mängdlära, men mot relationsdatabas
* Databasen är mängder, relations (tabeller)
* Grunden är från mängdlära, aningen modifierat
* Teorin bakom SQL

</script>



<script data-role="slide" data-markdown type="text/html">
# Konstruktioner

* Selection (välj rader)
* Projection (välj kolumner)
* Cartesion product (cross join)
* Set union (begränsningar)
* Set difference (begränsningar)

</script>



<script data-role="slide" data-markdown type="text/html">
# Cross join

* Två mängder. Gör en cross join mellan dem.

```
colors = [♥, ♠, ♣, ♦]
values = [A, K, D, J, 10, 9, 8, 7, 6, 5, 4, 3, 2]
```

</script>



<script data-role="slide" data-markdown type="text/html">
# Vem uppfann "relationsdatabasen"?

* E. F. Codd 1970
*  "A Relational Model of Data for Large Shared Data Banks"
* Modell för att lagra data.
* Relational algebra för att hämta data.

</script>



<script data-role="slide" data-markdown type="text/html">
# Summering

* Databas är mängder och bearbetning av mängder
* Relationsmodellen och relationsalgebra (Codd 1970)
* Relation = tabell
* Relationsmodellen har sin bas i matematikens mängdlära
* SQL bygger på relationsalgebra

</script>



<script data-role="slide" data-markdown type="text/html">
# Låt oss gå vidare...

</script>



<script data-role="slide" data-markdown type="text/html">
# Databas struktur

* Tabell (relation)
* Kolumn (attribute)
* Rad (tuple)

</script>



<script data-role="slide" data-markdown type="text/html">

<div style="background-color: white"><img alt="tabell struktur" src="img1/relation-tuple-attribute.png" style="width: 100%"></div>

</script>



<script data-role="slide" data-markdown type="text/html">
# Databas som kalkylark?

* Mental bild av databas

</script>



<script data-role="slide" data-markdown type="text/html">

<img alt="tabell som kalkylark" src="img1/tabell-som-kalkylark-1.png" style="width: 100%">

</script>



<script data-role="slide" data-markdown type="text/html">

<img alt="tabell som kalkylark" src="img1/tabell-som-kalkylark-2.png" style="width: 100%">

</script>



<script data-role="slide" data-markdown type="text/html">
# Fler vyer av databasen?

* Databasens struktur (schema) kontra innehållet

</script>



<script data-role="slide" data-markdown type="text/html">

<img alt="ER diagram" src="img1/er-diagram.png" style="width: 100%">

</script>



<script data-role="slide" data-markdown type="text/html">
# Hur prata med databasen?

</script>



<script data-role="slide" data-markdown type="text/html">
# SQL

* Structured Query Language
* ISO Standard: SQL-87, SQL:92, SQL:1999, mfl
* Grund, men varierar mellan RDBMS
* Programmeringskonstruktioner som "vanligt" språk

</script>



<script data-role="slide" data-markdown type="text/html">
# SQL DDL kontra DML

* DDL - Data Definition Language
* DML - Data Manipulation Language

</script>



<script data-role="slide" data-markdown type="text/html">
# SQL DDL

* CREATE DATABASE/TABLE/VIEW
* DROP DATABASE/TABLE/VIEW
* ALTER DATABASE/TABLE/VIEW
* (manipulera databasens schema/struktur)

</script>



<script data-role="slide" data-markdown type="text/html">
# SQL DML

* SELECT
* INSERT
* UPDATE
* DELETE
* (manipulera innehållet i databasen)

</script>



<script data-role="slide" data-markdown type="text/html">
# Ett exempel

```
code        name        points    
----------  ----------  ----------
PA1439      htmlphp     7.5       
PA1436      design      7.5       
DV1531      python      7.5       
DV1532      javascript  7.5       
```

</script>



<script data-role="slide" data-markdown type="text/html">
# CREATE DATABASE

```sql
CREATE DATABASE bth;
```

</script>



<script data-role="slide" data-markdown type="text/html">
# CREATE TABLE

```sql
DROP TABLE IF EXISTS Course;
CREATE TABLE Course
(
    "code" CHAR(6) PRIMARY KEY NOT NULL,
    "name" VARCHAR(40) NOT NULL,
    "points" REAL NOT NULL
);
```

</script>



<script data-role="slide" data-markdown type="text/html">
# Tänk på

* Datatyper skiljer mellan DMBS
* I grunden liknande datatyper

</script>



<script data-role="slide" data-markdown type="text/html">
# INSERT INTO

```sql
INSERT INTO Course VALUES ("DV1462", "htmlphp", 7.5);

INSERT INTO Course VALUES 
    ("PA1436", "design", 7.5),
    ("DV1531", "python", 7.5),
    ("DV1532", "javascript1", 7.5);
```

</script>



<script data-role="slide" data-markdown type="text/html">
# UPDATE

```sql
UPDATE Course
    SET
        course = "PA1439"
    WHERE
        course = "DV1462"
    LIMIT 1;
```

</script>



<script data-role="slide" data-markdown type="text/html">
# Tänk på

* UPDATE utan WHERE
* UPDATE utan LIMIT 1?

</script>



<script data-role="slide" data-markdown type="text/html">
# SELECT

```sql
SELECT * FROM Course;
SELECT name FROM Course;
SELECT name, points FROM COURSE WHERE code = "PA1439";
SELECT * FROM COURSE WHERE code LIKE "PA%";
```

</script>


<script data-role="slide" data-markdown type="text/html">
# DELETE

```sql
DELETE FROM Course WHERE code LIKE "DV%";
DELETE FROM Course WHERE code IN ("PA1439", "PA1436");
DELETE FROM Course WHERE code = "PA1439" LIMIT 1;
```

</script>



<script data-role="slide" data-markdown type="text/html">
# Tänk på

* DELETE utan WHERE
* DELETE utan LIMIT 1?

</script>



<script data-role="slide" data-markdown type="text/html">
#Avslutningsvis

* Frågor på det?

</script>



<script data-role="slide" data-markdown type="text/html">
<!-- empty slide by intention -->
</script>



<!-- include essential js-script -->
<script src="../js/mithril.min.js"></script>
<script src="../js/mithril-slideshow.js"></script>
